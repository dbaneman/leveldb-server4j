leveldb-server4j
================

Client/server wrapper for LevelDB for Java, written in Scala. Implemented using RPCs generated by Thrift.

- LevelDB (which is a pure library without native client/server support): https://github.com/google/leveldb 
- Thrift: https://thrift.apache.org
- LevelDB Java implementation used by server: https://github.com/dain/leveldb
 
## Starting the server
The quickest way to get started is to clone the source code and use sbt to run the server. Once you've installed sbt, open your terminal and enter:
    
    sbt run
    
The console should print:

    LevelDB server now running on 127.0.0.1:8001
    
That's it! You're up and running. 
 
### Custom configuration
This project uses Typesafe's config library. The default configuration (reference.conf) for the server is:
       
    leveldb-server {
      host-address = "127.0.0.1"  # address to listen on
      port = 8001  # port to listen on
      data-dir = "/opt/leveldb-server/"  # local directory for storing LevelDB data
    }
    
To run with a custom configuration, create a custom config file and pass the file location as the first argument to the main method:

    sbt
    > run "/home/jane/code/custom.conf"
    
## Starting the client
Following the lead of existing LevelDB libraries for Java (https://github.com/dain/leveldb and https://github.com/fusesource/leveldbjni), you create a DB object using an instance of a factory class.
 
    String serverHost = "127.0.0.1";
    int serverPort = 8001;
    DB client = new LevelDbClientFactory().open(host, port);

Note that there is no configuration file for the client.

## Using the client
The client uses the same interfaces as existing LevelDB libraries for Java (https://github.com/dain/leveldb and https://github.com/fusesource/leveldbjni). For example: 

    client.put("foo".getBytes(), "bar".getBytes());  // write a value
    byte[] value = client.get("foo".getBytes);  // retrieve a value                        
    DBIterator iterator = client.iterator(); // retrieve an iterator for scanning over the database

## Caveats and future releases
As of the current release, the following LevelDB features are still unimplemented: 

- ReadOptions
- WriteOptions
- Snapshot

I also plan to add batching for WriteBatches and Iterators.  